<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - Shoes Shop</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="icon" type="image/x-icon" href="./img/Admin-icon.png" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
    <style>
      body {
        min-height: 100vh;
        display: flex;
        background-color: #f8f9fa;
      }
      /* Sidebar */
      .sidebar {
        width: 220px;
        background-color: #343a40;
        color: #fff;
        flex-shrink: 0;
      }
      .sidebar h2 {
        padding: 20px;
        text-align: center;
        font-size: 1.5rem;
        border-bottom: 1px solid #495057;
      }
      .sidebar a {
        display: block;
        padding: 15px 20px;
        color: #fff;
        text-decoration: none;
        border-bottom: 1px solid #495057;
        transition: 0.2s;
      }
      .sidebar a:hover {
        background-color: #495057;
      }
      /* Main content */
      .main-content {
        flex-grow: 1;
        padding: 30px;
      }
      .card {
        cursor: pointer;
        transition: 0.3s;
      }
      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
      }
      .card-icon {
        font-size: 2.5rem;
        color: #0d6efd;
      }
    </style>
  </head>
  <body>
    <!-- Sidebar -->
    <div class="sidebar">
      <h2>Shoes Shop Admin</h2>
      <a href="admin_user.php"
        ><i class="bi bi-person"></i> Quản lý người dùng</a
      >
      <a href="products.php"><i class="bi bi-box-seam"></i> Quản lý sản phẩm</a>
      <a href="orders.php"><i class="bi bi-bag"></i> Quản lý đơn hàng</a>
      <a href="contacts.php"><i class="bi bi-envelope"></i> Quản lý liên hệ</a>
      <a href="ArticleIndex.php"
        ><i class="bi bi-newspaper"></i> Quản lý bài báo</a
      >
      <a href="admin_faq.php"><i class="bi bi-question"></i> Quản lý FAQ</a>
      <a href="admin_questions.php"
        ><i class="bi bi-question"></i> Quản lý câu hỏi</a
      >
      <a href="#" id="btnLogout"><i class="bi bi-door-closed"></i> Logout</a>
    </div>

    <!-- Main content -->
    <div class="main-content">
      <h1 class="mb-4">Dashboard</h1>

      <div class="row g-4">
        <div class="col-md-3">
          <div
            class="card text-center p-3"
            onclick="location.href='admin_user.php'"
          >
            <i class="bi bi-person card-icon"></i>
            <h5 class="mt-3">User</h5>
            <p class="text-muted">Quản lý người dùng</p>
          </div>
        </div>
        <div class="col-md-3">
          <div
            class="card text-center p-3"
            onclick="location.href='products.php'"
          >
            <i class="bi bi-box-seam card-icon"></i>
            <h5 class="mt-3">Sản phẩm</h5>
            <p class="text-muted">Quản lý sản phẩm</p>
          </div>
        </div>
        <div class="col-md-3">
          <div
            class="card text-center p-3"
            onclick="location.href='orders.php'"
          >
            <i class="bi bi-bag card-icon"></i>
            <h5 class="mt-3">Đơn hàng</h5>
            <p class="text-muted">Quản lý đơn hàng</p>
          </div>
        </div>
        <div class="col-md-3">
          <div
            class="card text-center p-3"
            onclick="location.href='contacts.php'"
          >
            <i class="bi bi-envelope card-icon"></i>
            <h5 class="mt-3">Liên hệ</h5>
            <p class="text-muted">Xem liên hệ khách hàng</p>
          </div>
        </div>
      </div>
      <div class="row g-4 mt-5">
        <div class="col-md-3">
          <div
            class="card text-center p-3"
            onclick="location.href='ArticleIndex.php'"
          >
            <i class="bi bi-newspaper card-icon"></i>
            <h5 class="mt-3">Bài báo</h5>
            <p class="text-muted">Xem bài báo</p>
          </div>
        </div>
        <div class="col-md-3">
          <div
            class="card text-center p-3"
            onclick="location.href='products.php'"
          >
            <i class="bi bi-question card-icon"></i>
            <h5 class="mt-3">FAQ</h5>
            <p class="text-muted">Quản lý FAQ</p>
          </div>
        </div>
        <div class="col-md-3">
          <div
            class="card text-center p-3"
            onclick="location.href='orders.php'"
          >
            <i class="bi bi-question card-icon"></i>
            <h5 class="mt-3">Câu hỏi</h5>
            <p class="text-muted">Quản lý câu hỏi</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.7/axios.min.js"></script>
    <script>
      const user = JSON.parse(localStorage.getItem("user")); // Lấy user login

      if (user["role"] !== "admin") {
        alert("Bạn phải là admin để truy cập trang này!");
        window.location.href = "../public/index.php";
      }

      document.addEventListener("click", async (e) => {
        if (e.target.id === "btnLogout") {
          try {
            const res = await axios.post("../api/Authentication/logout.php");

            if (res.data.success) {
              // Xoá dữ liệu localStorage
              localStorage.removeItem("user");
              localStorage.removeItem("cart");

              alert("Đăng xuất thành công!");

              window.location.href = "../public/login.php";
            } else {
              alert("Logout failed!");
            }
          } catch (err) {
            console.error(err);
            alert("Server error!");
          }
        }
      });
    </script>
  </body>
</html>
